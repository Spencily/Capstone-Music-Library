{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block css %}
<link rel="stylesheet" href="{% static 'library/css/library.css' %}">
{% endblock %}

{% block content %}

<h2> Parts for {{ piece.title }} </h2>

<table>
    <tr>
        <th> Instrument </th>
        <th> Part Number </th>
        <th> PDF </th>
    </tr>
    {% for part in piece.parts.all %}
    <tr>
        <td> {{ part.instrument }} </td>
        <td> {{ part.part_number }} </td>
        <td> <a href="{{ part.pdf_file.url }}" download>Download PDF</a> </td>
    </tr>
    {% endfor %}
</table>

<div class="pdf_viewer">

</div>

{% if user.is_staff %}
    <div class="col form">
        {% if current_url == 'part_edit' %}
        <h2> Edit Part </h2>
        {% else %}
        <h2> Add a New Part </h2>
        {% endif %}
        <form id="partForm" method="post">
            {{ part_form | crispy }}
            {% csrf_token %}
            <button id="submitButton" type="submit" class="btn btn-lg">
                {% if current_url == 'part_edit' %}
                Update
                {% else %}
                Submit
                {% endif %}
            </button>
            <a href="{% url 'part_view' piece.id %}" class="btn btn-lg">Cancel</a>
        </form>
    </div>
    {% endif %}

{% endblock %}